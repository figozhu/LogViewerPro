# 多国语言实现路线（LogViewer Pro）

> 目标：在 Electron + Vue 3 + Pinia 架构中完成中 / 英双语支持，并保持可扩展性。每次任务状态更新务必同步备注，以便中断后快速恢复。

## 状态约定
- **未开始**：尚未着手
- **进行中**：开发 / 联调中
- **已完成**：开发、联调、自测全部通过
- **阻塞**：受依赖或环境限制暂无法推进（备注中写明原因）

## 任务列表

### 0. 方案设计与基建
| 编号 | 任务 | 描述 | 优先级 | 状态 | 备注 |
| --- | --- | --- | --- | --- | --- |
| L-00 | 需求与覆盖面确认 | 梳理主进程菜单、渲染界面、系统提示、日志错误信息等需要国际化的范围 | 高 | **已完成** | 定义首批语言（zh-CN / en-US）与扩展策略 |
| L-01 | 技术方案评估 | 选型 `vue-i18n@9`，明确资源结构与渲染/主进程协同方式 | 高 | **已完成** | 采用 `src/renderer/i18n` 统一管理翻译资源 |

### 1. 国际化基础设施
| 编号 | 任务 | 描述 | 优先级 | 状态 | 备注 |
| --- | --- | --- | --- | --- | --- |
| L-10 | 语言资源结构 | 在 `src/renderer/i18n/locales/` 维护 `zh-CN.ts` / `en-US.ts`，提供类型提示 | 高 | **已完成** | 已建立 `messages`、`shim.d.ts` 并覆盖核心命名空间 |
| L-11 | Renderer 注入 | 在 Vue 入口注册 `vue-i18n`，提供 `useI18n` helper | 高 | **已完成** | `main.ts` 注入 i18n，组件可直接调用 `t()` |
| L-12 | 主进程文案支持 | 菜单文本与语言切换逻辑统一管理 | 高 | **已完成** | 新增 `menu-texts.ts`，偏好变更时自动重建主菜单 |

### 2. 文案抽取与界面适配
| 编号 | 任务 | 描述 | 优先级 | 状态 | 备注 |
| --- | --- | --- | --- | --- | --- |
| L-20 | 渲染层文案抽取 | 将 App.vue、LogViewer、TemplateManager、帮助中心等组件的硬编码中文替换为 i18n key | 高 | **已完成** | App 主界面及所有子面板、LogViewer、模板管理、偏好设置、系统日志、模板选择对话框均已接入 i18n |
| L-21 | 主进程系统提示抽取 | 菜单外的系统提示、IPC 错误、对话框等文案统一引用翻译资源 | 中 | **已完成** | `app-texts.ts` 承载对话框/错误文本，`register-ipc` 与 `error-handler` 均按偏好语言输出 |
| L-22 | 布局/长度适配 | 针对英文偏长的标签、按钮做样式微调，确保多语言显示正常 | 中 | **已完成** | 导航/面板按钮支持换行，模板管理列表与表单占位符已适配长文本 |

### 3. 配置与运行时管理
| 编号 | 任务 | 描述 | 优先级 | 状态 | 备注 |
| --- | --- | --- | --- | --- | --- |
| L-30 | 偏好项扩展 | 在 `preferenceStore` / `UserPreferences` 中增加 `language` 字段，并在 UI 中提供选择 | 高 | **已完成** | 新增“界面语言”选择（自动 / 中文 / English） |
| L-31 | 语言切换联动 | 偏好更新后热切换渲染层语言，并通知主进程重建菜单 | 高 | **已完成** | Renderer 使用 `navigator.language` 处理 `auto`，主进程实时重建菜单 |
| L-32 | 首次启动语言检测 | 启动时根据系统语言或历史偏好初始化 i18n | 中 | **已完成** | `auto` 模式自动识别浏览器语言并设置 `document.lang` |

### 4. 质量保障与交付
| 编号 | 任务 | 描述 | 优先级 | 状态 | 备注 |
| --- | --- | --- | --- | --- | --- |
| L-40 | 单元 / 集成测试 | 覆盖偏好 Store、菜单构建、`t` helper 等关键逻辑 | 中 | 未开始 | 计划在语言切换流程稳定后补齐 |
| L-41 | 文案校对 / UI 验收 | 双语校对、截图归档，确认布局无溢出 | 中 | 未开始 | 建议在所有界面迁移完成后集中执行 |
| L-42 | 文档与贡献指引 | 更新 README / 开发文档 / PR 模板，明确新增文案需同步翻译 | 低 | 未开始 | 与最终交付同步处理 |
